name: Run OpenAI Codex CLI

on:
  workflow_dispatch:

jobs:
  codex:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
      - name: Set up Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'
      - name: Install Codex CLI
        run: npm install -g @openai/codex-cli
      - name: Run Codex CLI command
        env:
          OPENAI_API_KEY: ${{ secrets.OPENAI_API_KEY }}
        run: codex exec --model gpt-4.1 --full-auto "Generate a numbers.txt file with up to 10 comma-separated random integers between 1 and 100. Generate them by yourself and then stop. Do not run a script and do not validate the contents afterwards (not by listing the file, nor via git commands). Be as concise and fast as possible to save tokens."
      - name: Compile Numbers.java
        run: javac Numbers.java
      - name: Run Numbers.java
        run: java Numbers
      
